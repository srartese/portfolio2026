{"ast":null,"code":"const richTypes = {\n  Date: true,\n  RegExp: true,\n  String: true,\n  Number: true\n};\nexport default function diff(obj, newObj) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    cyclesFix: true\n  };\n  let _stack = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  let diffs = [];\n  const isObjArray = Array.isArray(obj);\n  for (const key in obj) {\n    const objKey = obj[key];\n    const path = isObjArray ? +key : key;\n    if (!(key in newObj)) {\n      diffs.push({\n        type: \"REMOVE\",\n        path: [path],\n        oldValue: obj[key]\n      });\n      continue;\n    }\n    const newObjKey = newObj[key];\n    const areCompatibleObjects = typeof objKey === \"object\" && typeof newObjKey === \"object\" && Array.isArray(objKey) === Array.isArray(newObjKey);\n    if (objKey && newObjKey && areCompatibleObjects && !richTypes[Object.getPrototypeOf(objKey)?.constructor?.name] && (!options.cyclesFix || !_stack.includes(objKey))) {\n      diffs.push.apply(diffs, diff(objKey, newObjKey, options, options.cyclesFix ? _stack.concat([objKey]) : []).map(difference => {\n        difference.path.unshift(path);\n        return difference;\n      }));\n    } else if (objKey !== newObjKey &&\n    // treat NaN values as equivalent\n    !(Number.isNaN(objKey) && Number.isNaN(newObjKey)) && !(areCompatibleObjects && (isNaN(objKey) ? objKey + \"\" === newObjKey + \"\" : +objKey === +newObjKey))) {\n      diffs.push({\n        path: [path],\n        type: \"CHANGE\",\n        value: newObjKey,\n        oldValue: objKey\n      });\n    }\n  }\n  const isNewObjArray = Array.isArray(newObj);\n  for (const key in newObj) {\n    if (!(key in obj)) {\n      diffs.push({\n        type: \"CREATE\",\n        path: [isNewObjArray ? +key : key],\n        value: newObj[key]\n      });\n    }\n  }\n  return diffs;\n}","map":{"version":3,"names":["richTypes","Date","RegExp","String","Number","diff","obj","newObj","options","arguments","length","undefined","cyclesFix","_stack","diffs","isObjArray","Array","isArray","key","objKey","path","push","type","oldValue","newObjKey","areCompatibleObjects","Object","getPrototypeOf","constructor","name","includes","apply","concat","map","difference","unshift","isNaN","value","isNewObjArray"],"sources":["/Users/srartese/Desktop/Repos/port26/node_modules/microdiff/dist/index.js"],"sourcesContent":["const richTypes = { Date: true, RegExp: true, String: true, Number: true };\nexport default function diff(obj, newObj, options = { cyclesFix: true }, _stack = []) {\n    let diffs = [];\n    const isObjArray = Array.isArray(obj);\n    for (const key in obj) {\n        const objKey = obj[key];\n        const path = isObjArray ? +key : key;\n        if (!(key in newObj)) {\n            diffs.push({\n                type: \"REMOVE\",\n                path: [path],\n                oldValue: obj[key],\n            });\n            continue;\n        }\n        const newObjKey = newObj[key];\n        const areCompatibleObjects = typeof objKey === \"object\" &&\n            typeof newObjKey === \"object\" &&\n            Array.isArray(objKey) === Array.isArray(newObjKey);\n        if (objKey &&\n            newObjKey &&\n            areCompatibleObjects &&\n            !richTypes[Object.getPrototypeOf(objKey)?.constructor?.name] &&\n            (!options.cyclesFix || !_stack.includes(objKey))) {\n            diffs.push.apply(diffs, diff(objKey, newObjKey, options, options.cyclesFix ? _stack.concat([objKey]) : []).map((difference) => {\n                difference.path.unshift(path);\n                return difference;\n            }));\n        }\n        else if (objKey !== newObjKey &&\n            // treat NaN values as equivalent\n            !(Number.isNaN(objKey) && Number.isNaN(newObjKey)) &&\n            !(areCompatibleObjects &&\n                (isNaN(objKey)\n                    ? objKey + \"\" === newObjKey + \"\"\n                    : +objKey === +newObjKey))) {\n            diffs.push({\n                path: [path],\n                type: \"CHANGE\",\n                value: newObjKey,\n                oldValue: objKey,\n            });\n        }\n    }\n    const isNewObjArray = Array.isArray(newObj);\n    for (const key in newObj) {\n        if (!(key in obj)) {\n            diffs.push({\n                type: \"CREATE\",\n                path: [isNewObjArray ? +key : key],\n                value: newObj[key],\n            });\n        }\n    }\n    return diffs;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}